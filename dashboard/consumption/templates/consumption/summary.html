{% extends 'consumption/layout.html' %}

{% block content %}
    <h1>Summary</h1>

    <p class="lead">A graph of the total consumption (aggregation of all users).</p>

    <div class="alert alert-danger summary-chart-error-alert" role="alert">
        <strong>Whoops!</strong> An error has occurred while fetching graph data. Please try reloading the page.
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    {% if user_list %}
        <div class="summary-chart-container">
            <div class="lds-ring">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
            <canvas id="chart" width="100%" height="300"></canvas>
        </div>

        <section class="section">
            <h2>Users Table</h2>
            <p class="lead">A sortable list of all imported user data.</p>

            <div class="summary-table-container">
                <table class="table table-bordered" id="users" width="100%">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Area</th>
                        <th>Tariff</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for user in user_list %}
                        <tr>
                            <td>{{ user.pk }}</td>
                            <td>{{ user.area }}</td>
                            <td>{{ user.tariff }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
    {% else %}
        <div class="alert alert-info" role="alert">No users are available!</div>
    {% endif %}

{% endblock %}